let defaultLangCode="";const switchingElements=[];function switchLanguage(t){const e=t.value;if(e===document.documentElement.lang)return;document.documentElement.lang=e;const n=`data-ls-${e}`,a=`data-ls-${defaultLangCode}`,s=`data-ls-html-${e}`,o=`data-ls-html-${defaultLangCode}`;for(const{element:t,isContentTarget:i,isHtmlTarget:l,targetAttributes:r}of switchingElements){if(l)if(i){const e=t.getAttribute(s)??t.getAttribute(o);e?t.innerHTML=e:t.textContent=t.getAttribute(n)??t.getAttribute(a)}else t.innerHTML=t.getAttribute(s)??t.getAttribute(o)??"";else i&&(t.textContent=t.getAttribute(n)??t.getAttribute(a));if(r)for(const n of r){const a=`data-ls-${n}-${e}`,s=`data-ls-${n}-${defaultLangCode}`;t.setAttribute(n,t.getAttribute(a)??t.getAttribute(s)??"")}}}function registerElement(t){let e=null;for(const n of t.attributes){if(!n.name.startsWith("data-ls-"))continue;e=e??{element:t,isContentTarget:!1,isHtmlTarget:!1};const a=n.name.indexOf("-",8);if(-1===a)e.isContentTarget=!0,t.setAttribute(`data-ls-${defaultLangCode}`,t.textContent??"");else{const s=n.name.substring(8,a);"html"==s?(e.isHtmlTarget=!0,t.setAttribute(`data-ls-html-${defaultLangCode}`,t.innerHTML??"")):(e.targetAttributes||(e.targetAttributes=new Set),e.targetAttributes.add(s),t.setAttribute(`data-ls-${s}-${defaultLangCode}`,t.getAttribute(s)??""))}}e&&switchingElements.push(e)}export function loadLanguages(){defaultLangCode=document.documentElement.lang;for(const t of document.querySelectorAll("*"))t instanceof HTMLElement&&registerElement(t);const t=[...document.querySelectorAll("input[name='language']")].filter(t=>t instanceof HTMLInputElement);for(const e of t)e.addEventListener("click",function(){switchLanguage(this)});for(const e of window.navigator.languages)for(const n of t){const t=n.value;if(e.startsWith(t))return n.checked=!0,void(t!==defaultLangCode&&switchLanguage(n))}}